<html lang="en">
    <head>
        {% extends "foods/base.html" %}
        {% block content %}
    <title>{{menu.menu_name}}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href='https://fonts.googleapis.com/css?family=Lemon' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
<style>
h1 {
    font-family: 'Lemon';font-size: 32px;
}
.menuName {
    padding-left: 20px;
    padding-top: 10px;
}
.creatorName {
    padding-left: 20px;
    padding-top: 5;
    color: slategray;
}
.menuImage{
    float: right;
    padding-left: 50px;
    padding-top: 0px;
    padding-right: 20px;
    padding-bottom: 50px;
}
.description {
    padding-left: 20px;
    padding-top: 20px;
}
.brief-info {
    text-align: center;
    padding-top: 30px;
}
.ingredient p {
    padding-left: 20px;
}
body {font-family: 'Roboto';}
body h3{
    padding-left: 20px;
    padding-bottom: 10px;
}
.nutrition h6{
    padding-left: 20px;
}
.main{
    padding: 0px;
}
.right{
    padding: 20px;
}
span.inline{
    display: inline-block;
    text-align: center;
    width: 200px;
    height: 50px;
    padding: 5px;
    font-weight: bolder;
}
/* Use a media query to add a break point at 800px: */
@media screen and (max-width: 800px) {
   .main, .right {
    width: 100%; /* The width is 100%, when the viewport is 800px or smaller */
  }
}
.rating-list li {
    float: right;
    color: #ddd;
    padding: 10px 5px;
}

.rating-list li:hover,
.rating-list li:hover ~ li {
    color: orange;
}

.rating-list {
    display: inline-block;
    list-style: none;
}
.checked {
    color: orange;
}
</style>
</head>
<body>
    <div class="main">
    <div class="menuName">
        <h1><b>{{ menu.menu_name }}</b></h1>
        
    </div>
    <div class="creatorName">
        <h5 ><b>By {{ menu.creator_name}}</b></h5>
    </div>
    </div>
    <div class="right">
    <div class="menuImage">
        <img src= "{{menu.picture_url}}" alt=menu.id>
    </div>
    </div>
    <div class="main">
    <div class="description">
        <p>{{ menu.description }}</p>
              <div class="card-body">
                <h5 class="card-title">Avg rating:
                    <span class="fa fa-star {% if avg_rate > 0 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if avg_rate > 1 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if avg_rate > 2 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if avg_rate > 3 %} checked {% endif %}" ></span>
                    <span class="fa fa-star {% if avg_rate > 4 %} checked {% endif %}"></span>
                </h5>
                <ul class="btn btn-light list-inline rating-list">
                    <li onclick="rate(5, {{ menu.id }})">
                        <i class="fa fa-star {% if menu.rating > 4 %} checked {% endif %}" title="Rate 5"></i></li>
                    <li onclick="rate(4, {{ menu.id }})">
                        <i class="fa fa-star {% if menu.rating > 3 %} checked {% endif %}" title="Rate 4"></i></li>
                    <li onclick="rate(3, {{ menu.id }})">
                        <i class="fa fa-star {% if menu.rating > 2 %} checked {% endif %}" title="Rate 3"></i></li>
                    <li onclick="rate(2, {{ menu.id }})">
                        <i class="fa fa-star {% if menu.rating > 1 %} checked {% endif %}" title="Rate 2"></i></li>
                    <li onclick="rate(1, {{ menu.id }})">
                        <i class="fa fa-star {% if menu.rating > 0 %} checked {% endif %}" title="Rate 1"></i></li>
                  </ul>
        </div>
        <script>
            const rate = (rating, menu_id) => {
                fetch(`/rate/${menu_id}/${rating}/`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }).then(rest => {
                    window.location.reload();
                })
            }
        </script>
    </div>

    <div class="brief-info">
        {% if menu.number_of_ingredients != -99 and menu.total_cooking_time != -99 and menu.energy_kcal != -99%}
        <p>{{ menu.number_of_ingredients }} Ingredients&emsp;|&emsp;{{ menu.energy_kcal }} calories</p>
        {% elif menu.number_of_ingredients != -99 %}
        <p>{{ menu.number_of_ingredients }} Ingredients</p>
        {% elif menu.energy_kcal != -99%}
        <p>{{ menu.energy_kcal }} calories</p>
        {% endif %}
    </div>
    <div class=ingredient>        
        <h3><b>Ingredients</b></h3>
        {% for ingredients in menu.ingredients %}
            <p>{{ingredients.wholeLine}}</p>
        {% endfor %} 
    </div>
    <div class="nutrition">
        <h3><b>Nutrition</b></h3>
        {% if menu.energy_kcal != -99 and menu.fat_kcal != -99 and menu.sugar != -99%}
        <span class="inline">
            <h6>Total calories<br></h6>
            {{ menu.energy_kcal }} calories
        </span>
        <span class="inline">
            <h6>Fat<br></h6>
            {{ menu.fat_kcal }} calories
        </span>
        <span class="inline">
            <h6>Sugar<br></h6>
            {{ menu.sugar }} grams
        </span>
        {% elif menu.energy_kcal != -99 and  menu.fat_kcal != -99 %}
        <span class="inline">
            <h6>Total calories<br></h6>
            {{ menu.energy_kcal }} calories
        </span>
        <span class="inline">
            <h6>Fat<br></h6>
            {{ menu.fat_kcal }} calories
        </span>
        {% elif menu.energy_kcal != -99 and  menu.sugar != -99%}
        <span class="inline">
            <h6>Total calories<br></h6>
            {{ menu.energy_kcal }} calories
        </span>
        <span class="inline">
            <h6>Sugar<br></h6>
            {{ menu.sugar }} grams
        </span>
        {% elif menu.fat_kcal != -99 and  menu.sugar != -99%}
        <span class="inline">
            <h6>Fat<br></h6>
            {{ menu.fat_kcal }} calories
        </span>
        <span class="inline">
            <h6>Sugar<br></h6>
            {{ menu.sugar }} grams
        </span>
        {% elif menu.energy_kcal != -99 %}
        <span class="inline">
            <h6>Total calories<br></h6>
            {{ menu.energy_kcal }} calories
        </span>
        {% elif menu.fat_kcal != -99%}
        <span class="inline">
            <h6>Fat<br></h6>
            {{ menu.fat_kcal }} calories
        </span>
        {% elif menu.sugar != -99%}
        <span class="inline">
            <h6>Sugar<br></h6>
            {{ menu.sugar }} grams
        </span>
        {% else %}
        <span class="inline">
            <h6> Nutrition are not available for this menu.</h6>
        </span>
        </b>
        {% endif %}
        
    </div>
</div>
</body>
</html>
{% endblock %}